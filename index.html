<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
<title>Dear Sushiiii Will You Be My Valentine? üíï</title>
<link href="https://fonts.googleapis.com/css2?family=Indie+Flower&family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">

<!-- Confetti library -->
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.3/dist/confetti.browser.min.js"></script>

<style>
  :root {
    --bg1: #ffd6e7;
    --bg2: #ffeef6;
    --card: #ffffffcc;
    --yes: #ff3b7a;
    --yesHover: #ff1f68;
  }

  * { 
    box-sizing: border-box; 
    margin: 0;
    padding: 0;
  }
  
  body {
    margin: 0;
    min-height: 100svh;
    display: grid;
    place-items: center;
    background: radial-gradient(circle at top, var(--bg2), var(--bg1));
    font-family: 'Poppins', sans-serif;
    overflow: hidden;
    padding: 16px;
  }

  /* FULL-SCREEN CONFETTI CANVAS */
  #confettiCanvas {
    position: fixed;
    inset: 0;
    width: 100vw;
    height: 100vh;
    pointer-events: none;
    z-index: 9999;
  }

  .container {
    width: min(720px, 92vw);
    padding: 26px 22px;
    background: var(--card);
    backdrop-filter: blur(10px);
    border-radius: 22px;
    text-align: center;
    box-shadow: 0 18px 60px rgba(0,0,0,.15);
    max-height: 90vh;
    overflow-y: auto;
    position: relative;
  }
  
  .container > div {
    width: 100%;
  }
  
  /* Make screens take full container space */
  .question-screen,
  .success-screen,
  .gifts-selection-screen,
  .gift-screen {
    position: relative;
    width: 100%;
  }

  /* QUESTION SCREEN */
  .question-screen {
    display: block;
  }

  .question-screen.hidden {
    display: none;
  }

  /* Cute animal SVG */
  .art {
    width: min(260px, 80vw);
    margin: 0 auto 10px;
    display: block;
    filter: drop-shadow(0 10px 14px rgba(0,0,0,.12));
  }

  h1 {
    font-family: 'Indie Flower', cursive;
    font-size: clamp(26px, 4vw, 44px);
    color: #ff1493;
    margin: 12px 0 18px;
  }

  .question-text {
    font-family: 'Indie Flower', cursive;
    font-size: clamp(22px, 3.5vw, 34px);
    color: #d63384;
    margin-bottom: 30px;
  }

  .button-zone {
    position: relative;
    width: min(520px, 92%);
    height: 150px;
    margin: 0 auto;
    touch-action: none;
  }

  button {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    padding: 16px 24px;
    font-size: 18px;
    font-weight: 800;
    border-radius: 999px;
    border: none;
    cursor: pointer;
    box-shadow: 0 10px 24px rgba(0,0,0,.14);
    user-select: none;
    -webkit-tap-highlight-color: transparent;
    transition: transform .12s ease, background .12s ease;
    font-family: 'Poppins', sans-serif;
  }

  #yesBtn {
    left: 18%;
    background: var(--yes);
    color: #fff;
  }
  #yesBtn:hover { background: var(--yesHover); }

  #noBtn {
    left: 62%;
    background: #e5e7eb;
    color: #111827;
  }

  .hint {
    margin-top: 10px;
    font-size: 13px;
    opacity: .7;
  }

  .cute-message {
    margin-top: 15px;
    font-family: 'Indie Flower', cursive;
    font-size: 18px;
    color: #ff1493;
    min-height: 25px;
    font-weight: 600;
    animation: fadeIn 0.3s ease;
  }

  @keyframes blink {
    0%, 49% { opacity: 1; }
    50%, 100% { opacity: 0; }
  }

  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(-5px); }
    to { opacity: 1; transform: translateY(0); }
  }

  /* Message bubble styles */
  .wavy-frame {
    position: relative;
    padding: 20px;
    background: rgba(255, 255, 255, 0.6);
    border-radius: 15px;
    margin: 20px 0;
  }

  .chat-messages {
    display: flex;
    flex-direction: column;
    gap: 15px;
    padding: 20px;
    max-width: 100%;
  }

  .message-group {
    display: flex;
    flex-direction: column;
    gap: 20px;
  }

  .message-bubble {
    background: white;
    padding: 15px 20px;
    border-radius: 20px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    font-family: 'Poppins', sans-serif;
    font-size: 14px;
    max-width: 70%;
    position: relative;
    min-height: 50px;
  }

  .message-bubble .message-text::after {
    content: '|';
    animation: blink 0.7s infinite;
    margin-left: 2px;
  }

  .message-bubble.typing-done .message-text::after {
    display: none;
  }

  .message-bubble.left {
    align-self: flex-start;
    background: linear-gradient(135deg, #ff6b9d 0%, #ff1493 100%);
    color: white;
  }

  .message-bubble.right {
    align-self: flex-end;
    background: #ffe4e1;
    color: #d63384;
  }

  .hearts-cluster {
    font-size: 12px;
    line-height: 1.2;
    position: absolute;
  }

  .left-hearts {
    right: -35px;
    top: 5px;
  }

  .right-hearts {
    left: -35px;
    top: 5px;
  }

  .roses-container {
    width: 100%;
    max-width: 300px;
    margin: 0 auto;
  }

  .roses-container svg {
    width: 100%;
    height: auto;
  }

  /* SUCCESS SCREEN */
  .success-screen {
    display: none;
  }

  .success-screen.active {
    display: block;
    animation: pop .35s ease;
  }

  .continue-btn {
    position: static;
    transform: none;
    background: var(--yes);
    color: white;
    padding: 16px 40px;
    font-size: 20px;
    font-weight: 800;
    border-radius: 999px;
    border: none;
    cursor: pointer;
    box-shadow: 0 10px 24px rgba(0,0,0,.14);
    margin-top: 20px;
    transition: all .3s ease;
  }

  .continue-btn:hover {
    background: var(--yesHover);
    transform: translateY(-3px);
    box-shadow: 0 15px 30px rgba(0,0,0,.2);
  }

  /* GIFTS SELECTION SCREEN */
  .gifts-selection-screen {
    display: none;
  }

  .gifts-selection-screen.active {
    display: block;
    animation: pop .35s ease;
  }

  @keyframes pop {
    from { transform: scale(.96); opacity: 0; }
    to { transform: scale(1); opacity: 1; }
  }

  .success-title {
    font-family: 'Indie Flower', cursive;
    font-size: clamp(30px, 4.5vw, 46px);
    color: #ff1493;
    margin: 10px 0;
  }

  .success-subtitle {
    font-family: 'Indie Flower', cursive;
    font-size: clamp(18px, 2.5vw, 24px);
    color: #ff69b4;
    margin-bottom: 30px;
  }

  .fireworks {
    width: min(380px, 90vw);
    margin: 0 auto 30px;
    display: block;
  }

  .gifts-container {
    display: flex;
    justify-content: center;
    gap: 20px;
    margin-bottom: 20px;
    flex-wrap: wrap;
  }

  .gift-box {
    width: 160px;
    height: 100px;
    background: linear-gradient(135deg, #ffb3ba 0%, #ffa3ab 100%);
    border-radius: 25px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.3s;
    border: none;
    box-shadow: 0 8px 20px rgba(255, 105, 180, 0.3);
    color: white;
    font-weight: 600;
    font-size: 1.2em;
    text-decoration: underline;
    text-underline-offset: 3px;
    position: static;
    top: auto;
    left: auto;
    transform: none;
  }

  .gift-box:hover {
    transform: translateY(-10px) scale(1.05) !important;
    box-shadow: 0 15px 30px rgba(255, 105, 180, 0.5);
  }

  /* GIFT SCREENS */
  .gift-screen {
    display: none !important;
  }

  .gift-screen.active {
    display: block !important;
    animation: slideIn 0.5s ease;
  }

  @keyframes slideIn {
    from { 
      opacity: 0;
      transform: translateY(20px);
    }
    to { 
      opacity: 1;
      transform: translateY(0);
    }
  }

  .back-btn {
    position: static !important;
    transform: none !important;
    background: #ff69b4;
    color: white;
    padding: 10px 25px;
    border-radius: 25px;
    border: none;
    cursor: pointer;
    font-weight: 600;
    box-shadow: 0 4px 12px rgba(255, 105, 180, 0.3);
    margin-bottom: 20px;
    transition: all 0.3s;
    font-family: 'Poppins', sans-serif;
    font-size: 16px;
  }

  .back-btn:hover {
    transform: translateY(-2px) !important;
    background: #ff1493;
    box-shadow: 0 6px 16px rgba(255, 105, 180, 0.5);
  }

  .gift-content {
    background: linear-gradient(135deg, #ffc9e5 0%, #ffb3d9 100%);
    padding: 30px 20px;
    border-radius: 20px;
    border: 5px solid #ff1493;
    margin-top: 20px;
    position: relative;
  }

  .gift-content::before {
    content: '';
    position: absolute;
    top: -8px;
    left: -8px;
    right: -8px;
    bottom: -8px;
    border: 3px solid #ff1493;
    border-radius: 25px;
    background: transparent;
    clip-path: polygon(
      0% 5%, 2% 3%, 4% 5%, 6% 3%, 8% 5%, 10% 3%, 12% 5%, 14% 3%, 16% 5%, 18% 3%, 20% 5%,
      22% 3%, 24% 5%, 26% 3%, 28% 5%, 30% 3%, 32% 5%, 34% 3%, 36% 5%, 38% 3%, 40% 5%,
      42% 3%, 44% 5%, 46% 3%, 48% 5%, 50% 3%, 52% 5%, 54% 3%, 56% 5%, 58% 3%, 60% 5%,
      62% 3%, 64% 5%, 66% 3%, 68% 5%, 70% 3%, 72% 5%, 74% 3%, 76% 5%, 78% 3%, 80% 5%,
      82% 3%, 84% 5%, 86% 3%, 88% 5%, 90% 3%, 92% 5%, 94% 3%, 96% 5%, 98% 3%, 100% 5%,
      100% 95%, 98% 97%, 96% 95%, 94% 97%, 92% 95%, 90% 97%, 88% 95%, 86% 97%, 84% 95%,
      82% 97%, 80% 95%, 78% 97%, 76% 95%, 74% 97%, 72% 95%, 70% 97%, 68% 95%, 66% 97%,
      64% 95%, 62% 97%, 60% 95%, 58% 97%, 56% 95%, 54% 97%, 52% 95%, 50% 97%, 48% 95%,
      46% 97%, 44% 95%, 42% 97%, 40% 95%, 38% 97%, 36% 95%, 34% 97%, 32% 95%, 30% 97%,
      28% 95%, 26% 97%, 24% 95%, 22% 97%, 20% 95%, 18% 97%, 16% 95%, 14% 97%, 12% 95%,
      10% 97%, 8% 95%, 6% 97%, 4% 95%, 2% 97%, 0% 95%
    );
  }

  .qr-title {
    font-family: 'Indie Flower', cursive;
    font-size: clamp(24px, 4vw, 36px);
    color: #ff1493;
    margin-bottom: 25px;
  }

  /* Letter styling */
  .letter-container {
    max-width: 600px;
    margin: 0 auto;
    background: linear-gradient(135deg, #fff5f7 0%, #ffe8f0 100%);
    padding: 30px;
    border-radius: 20px;
    box-shadow: 0 10px 30px rgba(255, 105, 180, 0.2);
    border: 2px solid #ffc0cb;
  }

  .letter-text {
    font-family: 'Indie Flower', cursive;
    font-size: clamp(16px, 2.5vw, 20px);
    line-height: 1.8;
    color: #d63384;
    text-align: left;
    white-space: pre-line;
  }

  .letter-signature {
    margin-top: 25px;
    text-align: right;
    font-family: 'Indie Flower', cursive;
    font-size: clamp(18px, 3vw, 24px);
    color: #ff1493;
  }

  /* Spotify embed styling */
  .spotify-embed {
    max-width: 500px;
    margin: 0 auto;
    border-radius: 12px;
    overflow: hidden;
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);
    position: relative;
    z-index: 10;
  }

  .spotify-embed iframe {
    position: relative;
    z-index: 10;
  }

  /* QR Code styling */
  .qr-container {
    max-width: 400px;
    margin: 0 auto;
  }

  .qr-code {
    background: white;
    padding: 30px;
    border-radius: 20px;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
    margin-bottom: 20px;
  }

  /* HEARTS ANIMATION */
  .hearts-bg {
    position: fixed;
    inset: 0;
    pointer-events: none;
    z-index: -1;
    overflow: hidden;
  }

  @keyframes float {
    0% {
      transform: translateY(100vh) rotate(0deg);
      opacity: 0;
    }
    10% {
      opacity: 1;
    }
    90% {
      opacity: 1;
    }
    100% {
      transform: translateY(-20vh) rotate(360deg);
      opacity: 0;
    }
  }

  .heart {
    position: absolute;
    font-size: 30px;
    animation: float linear infinite;
  }

  /* Responsive adjustments */
  @media (max-width: 600px) {
    .gift-box {
      width: 140px;
      height: 90px;
      font-size: 1em;
    }
    
    .letter-container {
      padding: 20px;
    }
    
    .button-zone {
      height: 130px;
    }
  }

  /* Music control button */
  .music-control {
    position: fixed;
    bottom: 20px;
    right: 20px;
    width: 60px;
    height: 60px;
    border-radius: 50%;
    background: linear-gradient(135deg, #ff6b9d 0%, #ff1493 100%);
    border: none;
    color: white;
    font-size: 24px;
    cursor: pointer;
    box-shadow: 0 4px 12px rgba(255, 20, 147, 0.4);
    z-index: 1000;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .music-control:hover {
    transform: scale(1.1);
    box-shadow: 0 6px 20px rgba(255, 20, 147, 0.6);
  }

  .music-control:active {
    transform: scale(0.95);
  }
</style>
</head>
<body>
  <!-- Floating hearts background -->
  <div class="hearts-bg" id="heartsContainer"></div>

  <!-- Full-screen confetti canvas -->
  <canvas id="confettiCanvas"></canvas>

  <!-- Music control button -->
  <button class="music-control" id="musicControl" onclick="toggleMusic()" title="Toggle Music">
    üéµ
  </button>

  <main class="container">
    <!-- QUESTION SCREEN -->
    <div class="question-screen" id="questionScreen">
      <svg class="art" viewBox="0 0 350 220" xmlns="http://www.w3.org/2000/svg">
        <defs>
          <linearGradient id="heart" x1="0" x2="1">
            <stop offset="0" stop-color="#ff4d7d"/>
            <stop offset="1" stop-color="#ff1f68"/>
          </linearGradient>
        </defs>

        <!-- Floating heart -->
        <path d="M250 50 C250 33 270 25 282 38
                 C294 25 314 33 314 50
                 C314 78 282 92 282 106
                 C282 92 250 78 250 50Z"
              fill="url(#heart)"/>

        <!-- Penguin main body - outer purple shape -->
        <ellipse cx="160" cy="130" rx="55" ry="75" fill="#6b46c1"/>
        
        <!-- Head -->
        <circle cx="160" cy="70" r="40" fill="#6b46c1"/>
        
        <!-- Light purple face patch -->
        <ellipse cx="160" cy="75" rx="28" ry="32" fill="#d8b4fe"/>
        
        <!-- Light purple belly -->
        <ellipse cx="160" cy="140" rx="38" ry="58" fill="#d8b4fe"/>
        
        <!-- Left wing/flipper -->
        <ellipse cx="110" cy="130" rx="15" ry="50" fill="#553c9a" transform="rotate(-25 110 130)"/>
        
        <!-- Right wing/flipper -->
        <ellipse cx="210" cy="130" rx="15" ry="50" fill="#553c9a" transform="rotate(25 210 130)"/>
        
        <!-- Beak - upper part -->
        <ellipse cx="160" cy="75" rx="8" ry="6" fill="#9333ea"/>
        
        <!-- Beak - lower part -->
        <ellipse cx="160" cy="78" rx="7" ry="4" fill="#7c3aed"/>
        
        <!-- Left eye white -->
        <ellipse cx="148" cy="68" rx="10" ry="12" fill="#e9d5ff"/>
        <!-- Right eye white -->
        <ellipse cx="172" cy="68" rx="10" ry="12" fill="#e9d5ff"/>
        
        <!-- Left eye purple pupil -->
        <circle cx="148" cy="70" r="6" fill="#5b21b6"/>
        <!-- Right eye purple pupil -->
        <circle cx="172" cy="70" r="6" fill="#5b21b6"/>
        
        <!-- Eye shine/sparkle -->
        <circle cx="150" cy="68" r="2.5" fill="#f3e8ff"/>
        <circle cx="174" cy="68" r="2.5" fill="#f3e8ff"/>
        
        <!-- Feet -->
        <!-- Left foot -->
        <ellipse cx="145" cy="205" rx="20" ry="10" fill="#a855f7"/>
        <path d="M 135 205 L 130 210 L 135 208 Z" fill="#a855f7"/>
        <path d="M 145 208 L 142 213 L 145 210 Z" fill="#a855f7"/>
        <path d="M 155 208 L 155 213 L 157 210 Z" fill="#a855f7"/>
        
        <!-- Right foot -->
        <ellipse cx="175" cy="205" rx="20" ry="10" fill="#a855f7"/>
        <path d="M 165 205 L 163 210 L 165 208 Z" fill="#a855f7"/>
        <path d="M 175 208 L 173 213 L 175 210 Z" fill="#a855f7"/>
        <path d="M 185 208 L 188 213 L 187 210 Z" fill="#a855f7"/>
        
        <!-- Rosy cheeks -->
        <circle cx="135" cy="80" r="6" fill="#e9d5ff" opacity="0.8"/>
        <circle cx="185" cy="80" r="6" fill="#e9d5ff" opacity="0.8"/>
      </svg>

      <h1>üíï Will you be my Valentine? üíï</h1>

      <section class="button-zone" id="zone">
        <button id="yesBtn" onclick="sayYes()">Yes</button>
        <button id="noBtn" onmouseover="moveNoButton()" ontouchstart="moveNoButton()">No</button>
      </section>

      <div class="hint" id="hint">"No" seems a bit shy üòà</div>
      <div class="cute-message" id="cuteMessage"></div>
    </div>

    <!-- SUCCESS SCREEN -->
    <div class="success-screen" id="successScreen">
      <h2 class="success-title">YAY! üéâ</h2>
      <p class="success-subtitle">I knew you'd say yes!</p>
      
      <img class="fireworks" src="https://media.giphy.com/media/26ufdipQqU2lhNA4g/giphy.gif" alt="Fireworks"/>

      <button class="continue-btn" onclick="showGifts()">Continue ‚Üí</button>
    </div>

    <!-- GIFTS SELECTION SCREEN -->
    <div class="gifts-selection-screen" id="giftsScreen">
      <h2 class="success-title">Pick a gift to unwrap! üéÅ</h2>
      

            <div class="gifts-container">
                <button class="gift-box" onclick="openGift(1)">Gift 1 üíå</button>
                <button class="gift-box" onclick="openGift(2)">Gift 2 üéµ</button>
                <button class="gift-box" onclick="openGift(3)">Gift 3 üì±</button>
            </div>
        </div>

    <!-- GIFT 1: LETTER -->
    <div class="gift-screen" id="gift1">
      <button class="back-btn" onclick="backToGifts()">‚Üê Back</button>
      <div class="gift-content">
        <div class="wavy-frame">
          <div class="qr-title">Messages for you üíï</div>
          
          <div class="chat-messages">
            <div class="message-group">
              <!-- Left side messages -->
              <div style="display: flex; flex-direction: column; gap: 15px;">
                <div class="message-bubble left" data-message="You are the reason I wake up with a smile">
                  <span class="message-text"></span>
                  <div class="hearts-cluster left-hearts">
                    üíï<br>üíï
                  </div>
                </div>
                <div class="message-bubble left" data-message="Every moment with you feels like a dream">
                  <span class="message-text"></span>
                </div>
              </div>

              <!-- Roses -->
              <div class="roses-container">
                <svg viewBox="0 0 300 220" xmlns="http://www.w3.org/2000/svg">
                  <!-- Ribbon bow -->
                  <ellipse cx="150" cy="70" rx="40" ry="15" fill="#c62828" transform="rotate(-20 150 70)"/>
                  <ellipse cx="150" cy="70" rx="40" ry="15" fill="#d32f2f" transform="rotate(20 150 70)"/>
                  <rect x="145" y="70" width="10" height="120" fill="#8d6e63" rx="2"/>
                  
                  <!-- Roses cluster -->
                  <g>
                    <!-- Top center rose -->
                    <circle cx="150" cy="100" r="24" fill="#c62828"/>
                    <circle cx="145" cy="95" r="16" fill="#e53935"/>
                    <circle cx="155" cy="95" r="16" fill="#d32f2f"/>
                    <circle cx="150" cy="90" r="12" fill="#ef5350"/>
                    <path d="M150 85 Q145 80 150 75 Q155 80 150 85" fill="#f44336"/>
                    
                    <!-- Top left rose -->
                    <circle cx="115" cy="115" r="22" fill="#c62828"/>
                    <circle cx="111" cy="111" r="14" fill="#e53935"/>
                    <circle cx="119" cy="111" r="14" fill="#d32f2f"/>
                    <circle cx="115" cy="107" r="10" fill="#ef5350"/>
                    
                    <!-- Top right rose -->
                    <circle cx="185" cy="115" r="22" fill="#c62828"/>
                    <circle cx="181" cy="111" r="14" fill="#e53935"/>
                    <circle cx="189" cy="111" r="14" fill="#d32f2f"/>
                    <circle cx="185" cy="107" r="10" fill="#ef5350"/>
                    
                    <!-- Second row -->
                    <circle cx="95" cy="135" r="21" fill="#c62828"/>
                    <circle cx="91" cy="131" r="13" fill="#e53935"/>
                    <circle cx="99" cy="131" r="13" fill="#d32f2f"/>
                    
                    <circle cx="205" cy="135" r="21" fill="#c62828"/>
                    <circle cx="201" cy="131" r="13" fill="#e53935"/>
                    <circle cx="209" cy="131" r="13" fill="#d32f2f"/>
                    
                    <circle cx="130" cy="135" r="21" fill="#c62828"/>
                    <circle cx="126" cy="131" r="14" fill="#e53935"/>
                    <circle cx="134" cy="131" r="14" fill="#d32f2f"/>
                    
                    <circle cx="170" cy="135" r="21" fill="#c62828"/>
                    <circle cx="166" cy="131" r="14" fill="#e53935"/>
                    <circle cx="174" cy="131" r="14" fill="#d32f2f"/>
                    
                    <!-- Middle center rose -->
                    <circle cx="150" cy="145" r="23" fill="#c62828"/>
                    <circle cx="145" cy="140" r="15" fill="#e53935"/>
                    <circle cx="155" cy="140" r="15" fill="#d32f2f"/>
                    <circle cx="150" cy="136" r="11" fill="#ef5350"/>
                    
                    <!-- Third row -->
                    <circle cx="110" cy="165" r="20" fill="#c62828"/>
                    <circle cx="106" cy="162" r="13" fill="#e53935"/>
                    <circle cx="114" cy="162" r="13" fill="#d32f2f"/>
                    
                    <circle cx="190" cy="165" r="20" fill="#c62828"/>
                    <circle cx="186" cy="162" r="13" fill="#e53935"/>
                    <circle cx="194" cy="162" r="13" fill="#d32f2f"/>
                    
                    <!-- Bottom visible roses -->
                    <circle cx="130" cy="185" r="19" fill="#c62828"/>
                    <circle cx="126" cy="182" r="12" fill="#e53935"/>
                    
                    <circle cx="170" cy="185" r="19" fill="#c62828"/>
                    <circle cx="174" cy="182" r="12" fill="#e53935"/>
                    
                    <circle cx="150" cy="180" r="20" fill="#c62828"/>
                    <circle cx="146" cy="177" r="13" fill="#e53935"/>
                    <circle cx="154" cy="177" r="13" fill="#d32f2f"/>
                  </g>
                  
                  <!-- Green leaves -->
                  <ellipse cx="85" cy="150" rx="10" ry="18" fill="#2e7d32" transform="rotate(-35 85 150)"/>
                  <ellipse cx="215" cy="150" rx="10" ry="18" fill="#388e3c" transform="rotate(35 215 150)"/>
                  <ellipse cx="95" cy="180" rx="9" ry="16" fill="#43a047" transform="rotate(-25 95 180)"/>
                  <ellipse cx="205" cy="180" rx="9" ry="16" fill="#4caf50" transform="rotate(25 205 180)"/>
                  <ellipse cx="120" cy="200" rx="8" ry="14" fill="#66bb6a" transform="rotate(-20 120 200)"/>
                  <ellipse cx="180" cy="200" rx="8" ry="14" fill="#81c784" transform="rotate(20 180 200)"/>
                  <ellipse cx="140" cy="210" rx="7" ry="12" fill="#a5d6a7" transform="rotate(-15 140 210)"/>
                  <ellipse cx="160" cy="210" rx="7" ry="12" fill="#c8e6c9" transform="rotate(15 160 210)"/>
                </svg>
              </div>

              <!-- Right side messages -->
              <div style="display: flex; flex-direction: column; gap: 15px;">
                <div class="message-bubble right" data-message="You will forever be my only option.">
                  <span class="message-text"></span>
                  <div class="hearts-cluster right-hearts">
                    üíï<br>üíï
                  </div>
                </div>
                <div class="message-bubble right" data-message="I can't imagine a life without you in it">
                  <span class="message-text"></span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- GIFT 2: SPOTIFY SONG -->
    <div class="gift-screen" id="gift2">
      <button class="back-btn" onclick="backToGifts()">‚Üê Back</button>
      <div class="gift-content">
        <div class="qr-title">I made a song for you üéµ</div>
        
        <div class="spotify-embed">
          <iframe style="border-radius:12px" 
            src="https://open.spotify.com/embed/track/45PA9lW7U5LYnlpGrdTyHY?utm_source=generator" 
            width="100%" 
            height="352" 
            frameBorder="0" 
            allowfullscreen="" 
            allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture">
          </iframe>
        </div>

        <div style="margin-top: 20px;">
          <a href="https://open.spotify.com/track/45PA9lW7U5LYnlpGrdTyHY?si=d90d55fef6f14faa" 
             target="_blank" 
             style="display: inline-block; background: #1DB954; color: white; padding: 12px 30px; border-radius: 25px; text-decoration: none; font-weight: 600; margin-bottom: 15px; box-shadow: 0 4px 12px rgba(29, 185, 84, 0.3); transition: all 0.3s;"
             onmouseover="this.style.background='#1ed760'; this.style.transform='translateY(-2px)'; this.style.boxShadow='0 6px 16px rgba(29, 185, 84, 0.4)'"
             onmouseout="this.style.background='#1DB954'; this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 12px rgba(29, 185, 84, 0.3)'">
            üéµ Open in Spotify
          </a>
        </div>

        <div style="margin-top: 10px; color: #ff69b4; font-family: 'Indie Flower', cursive; font-size: 1.2em;">
          This song reminds me of you üíï
        </div>
        
        <div style="margin-top: 10px; font-size: 0.85em; color: #999;">
          (Click the button above to play in Spotify app)
        </div>
      </div>
    </div>

    <!-- GIFT 3: QR CODE -->
    <div class="gift-screen" id="gift3">
      <button class="back-btn" onclick="backToGifts()">‚Üê Back</button>
      <div class="gift-content">
        <div class="qr-title">Scan the QR code! üíå</div>
        
        <div class="qr-container">
          <div class="qr-code">
            <div class="qr-code">
  <img src="I_will_love_you_.png" 
       alt="QR Code"
       style="width: 100%; height: auto; border-radius: 12px;"
       id="realQR">
</div>

          </div>

          <div style="margin-top: 30px; color: #d63384; font-family: 'Indie Flower', cursive; font-size: 1.1em;">
            Scan me to get a special surprise! üíù<br>
            <small style="opacity: 0.7;">(Replace with your own QR code)</small>
          </div>
        </div>
      </div>
    </div>
  </main>

  <script>
    /* ---------- BACKGROUND MUSIC ---------- */
    let backgroundMusic = null;
    let isMusicPlaying = false;
    
    function initBackgroundMusic() {
      // Soft romantic background music - Replace this URL with your MP3 file URL
      // You can use: Google Drive link, Dropbox link, or any direct MP3 URL
      backgroundMusic = new Audio('https://cdn.pixabay.com/audio/2022/05/27/audio_1808fbf07a.mp3');
      backgroundMusic.loop = true;
      backgroundMusic.volume = 0.25; // Set volume to 25% for softer sound
      
      // Try to play automatically
      const playPromise = backgroundMusic.play();
      
      if (playPromise !== undefined) {
        playPromise.then(() => {
          // Autoplay started successfully
          isMusicPlaying = true;
          updateMusicButton();
        }).catch(error => {
          // Autoplay was prevented - show a start button or wait for user interaction
          console.log('Autoplay blocked. Music will start on user interaction.');
          isMusicPlaying = false;
          updateMusicButton();
          
          // Start music on first user click
          const startOnClick = () => {
            backgroundMusic.play().then(() => {
              isMusicPlaying = true;
              updateMusicButton();
            });
            document.removeEventListener('click', startOnClick);
          };
          document.addEventListener('click', startOnClick, { once: true });
        });
      }
    }

    function toggleMusic() {
      if (!backgroundMusic) return;
      
      if (isMusicPlaying) {
        backgroundMusic.pause();
        isMusicPlaying = false;
      } else {
        backgroundMusic.play().then(() => {
          isMusicPlaying = true;
        }).catch(err => {
          console.log('Could not play music:', err);
        });
      }
      updateMusicButton();
    }

    function updateMusicButton() {
      const button = document.getElementById('musicControl');
      if (button) {
        button.textContent = isMusicPlaying ? 'üéµ' : 'üîá';
        button.title = isMusicPlaying ? 'Mute Music' : 'Play Music';
      }
    }
    
    // Initialize background music when page loads
    window.addEventListener('DOMContentLoaded', initBackgroundMusic);

    /* ---------- FLOATING HEARTS BACKGROUND ---------- */
    function createFloatingHearts() {
      const container = document.getElementById('heartsContainer');
      const hearts = ['üíï', 'üíñ', 'üíó', 'üíù', 'üíò', '‚ù§Ô∏è'];
      
      setInterval(() => {
        const heart = document.createElement('div');
        heart.className = 'heart';
        heart.textContent = hearts[Math.floor(Math.random() * hearts.length)];
        heart.style.left = Math.random() * 100 + 'vw';
        heart.style.animationDuration = (Math.random() * 3 + 5) + 's';
        heart.style.fontSize = (Math.random() * 20 + 20) + 'px';
        heart.style.opacity = Math.random() * 0.5 + 0.3;
        
        container.appendChild(heart);
        
        setTimeout(() => heart.remove(), 8000);
      }, 800);
    }
    
    createFloatingHearts();

    /* ---------- CONFETTI ---------- */
    const confettiCanvas = document.getElementById("confettiCanvas");

    function resizeConfettiCanvas() {
      const dpr = Math.max(1, window.devicePixelRatio || 1);
      confettiCanvas.width = Math.floor(window.innerWidth * dpr);
      confettiCanvas.height = Math.floor(window.innerHeight * dpr);
      confettiCanvas.style.width = "100vw";
      confettiCanvas.style.height = "100vh";
    }

    resizeConfettiCanvas();
    window.addEventListener("resize", resizeConfettiCanvas);
    window.addEventListener("orientationchange", () => setTimeout(resizeConfettiCanvas, 150));

    const confettiInstance = confetti.create(confettiCanvas, {
      resize: false,
      useWorker: true
    });

    function fullScreenConfetti() {
      const end = Date.now() + 1600;

      (function frame() {
        confettiInstance({
          particleCount: 12,
          spread: 90,
          startVelocity: 45,
          ticks: 180,
          origin: { x: Math.random(), y: Math.random() * 0.3 }
        });
        if (Date.now() < end) requestAnimationFrame(frame);
      })();

      setTimeout(() => {
        confettiInstance({
          particleCount: 300,
          spread: 140,
          startVelocity: 60,
          ticks: 220,
          origin: { x: 0.5, y: 0.55 }
        });
      }, 300);
    }

    /* ---------- YES BUTTON GROWS ---------- */
    let yesScale = 1;
    function growYes() {
      yesScale = Math.min(3.5, yesScale + 0.15);
      document.getElementById('yesBtn').style.transform = `translateY(-50%) scale(${yesScale})`;
      
      // Also make the text bigger for more emphasis
      const yesBtnText = document.getElementById('yesBtn');
      if (yesScale > 2) {
        yesBtnText.style.fontSize = '24px';
      }
      if (yesScale > 2.5) {
        yesBtnText.style.fontSize = '28px';
      }
      if (yesScale > 3) {
        yesBtnText.style.fontSize = '32px';
      }
    }

    /* ---------- CUTE MESSAGES ---------- */
    const cuteMessages = [
      "Seriously, reconsider! üíú",
      "Are you sure about that? ü§î",
      "Think again, please! üíï",
      "Don't break my heart! üíî",
      "I know you want to say yes! üòä",
      "Come on, you know you want to! üíñ",
      "Pretty please? ü•∫",
      "Your heart says yes! ‚ù§Ô∏è",
      "Don't be shy, say yes! üòò",
      "I believe in us! üíú",
      "Reconsider, my love! üíù",
      "Yes is the right answer! ‚ú®"
    ];

    let lastMessageIndex = -1;

    function showCuteMessage() {
      const messageElement = document.getElementById('cuteMessage');
      let randomIndex;
      
      // Make sure we don't show the same message twice in a row
      do {
        randomIndex = Math.floor(Math.random() * cuteMessages.length);
      } while (randomIndex === lastMessageIndex && cuteMessages.length > 1);
      
      lastMessageIndex = randomIndex;
      messageElement.textContent = cuteMessages[randomIndex];
      
      // Re-trigger animation
      messageElement.style.animation = 'none';
      setTimeout(() => {
        messageElement.style.animation = 'fadeIn 0.3s ease';
      }, 10);
    }

    /* ---------- NO BUTTON RUNS AWAY ---------- */
    function clamp(n, min, max) {
      return Math.max(min, Math.min(max, n));
    }

    function moveNoButton() {
      const zone = document.getElementById('zone');
      const noBtn = document.getElementById('noBtn');
      const z = zone.getBoundingClientRect();
      const b = noBtn.getBoundingClientRect();

      // Generate random position
      const maxX = z.width - b.width - 40;
      const maxY = z.height - b.height - 20;
      
      const newLeft = Math.random() * maxX;
      const newTop = Math.random() * maxY;

      noBtn.style.left = newLeft + "px";
      noBtn.style.top = newTop + "px";
      noBtn.style.transform = "none";

      growYes();
      showCuteMessage(); // Show a cute message when No runs away
    }

    // Also make "No" run away on pointer movement near it
    const zone = document.getElementById("zone");
    const noBtn = document.getElementById("noBtn");
    
    zone.addEventListener("pointermove", e => {
      const b = noBtn.getBoundingClientRect();
      const d = Math.hypot(
        (b.left + b.width / 2) - e.clientX,
        (b.top + b.height / 2) - e.clientY
      );
      if (d < 100) {
        moveNoButton();
      }
    });

    noBtn.addEventListener("click", e => e.preventDefault());

    /* ---------- SAY YES ---------- */
    function sayYes() {
      document.getElementById('questionScreen').classList.add('hidden');
      document.getElementById('questionScreen').style.display = 'none';
      document.getElementById('successScreen').classList.add('active');
      document.getElementById('successScreen').style.display = 'block';
      resizeConfettiCanvas();
      fullScreenConfetti();
    }

    /* ---------- SHOW GIFTS ---------- */
    function showGifts() {
      // Hide success screen
      document.getElementById('successScreen').classList.remove('active');
      document.getElementById('successScreen').style.display = 'none';
      
      // Show gifts screen
      document.getElementById('giftsScreen').style.display = 'block';
      document.getElementById('giftsScreen').classList.add('active');
      
      document.querySelector('.container').scrollTop = 0;
    }

    /* ---------- GIFT FUNCTIONS ---------- */
    function typeMessageBubble(element, message, speed = 40) {
      const textSpan = element.querySelector('.message-text');
      let index = 0;
      textSpan.textContent = '';
      
      function type() {
        if (index < message.length) {
          textSpan.textContent += message.charAt(index);
          index++;
          setTimeout(type, speed);
        } else {
          element.classList.add('typing-done');
        }
      }
      
      type();
    }

    function animateLetterMessages() {
      const messageBubbles = document.querySelectorAll('#gift1 .message-bubble');
      const delays = [0, 800, 2000, 2800]; // Staggered delays for each message
      
      messageBubbles.forEach((bubble, index) => {
        setTimeout(() => {
          const message = bubble.getAttribute('data-message');
          typeMessageBubble(bubble, message, 40);
        }, delays[index]);
      });
    }

    function openGift(giftNum) {
      console.log('Opening gift:', giftNum);
      
      // Hide gifts screen
      const giftsScreen = document.getElementById('giftsScreen');
      giftsScreen.classList.remove('active');
      giftsScreen.style.display = 'none';
      
      // Hide all gift screens first
      document.querySelectorAll('.gift-screen').forEach(screen => {
        screen.classList.remove('active');
        screen.style.display = 'none';
      });
      
      // Show the selected gift
      const giftScreen = document.getElementById('gift' + giftNum);
      giftScreen.style.display = 'block';
      giftScreen.classList.add('active');
      
      // If it's gift 1 (letter), animate the messages
      if (giftNum === 1) {
        setTimeout(() => {
          animateLetterMessages();
        }, 300); // Small delay after screen appears
      }
      
      // If it's gift 2 (song), pause background music so Spotify can play
      if (giftNum === 2 && backgroundMusic && isMusicPlaying) {
        backgroundMusic.pause();
      }
      
      // Scroll to top of container
      document.querySelector('.container').scrollTop = 0;
    }

    function backToGifts() {
      console.log('Back to gifts');
      
      // Resume background music if it was playing
      if (backgroundMusic && isMusicPlaying && backgroundMusic.paused) {
        backgroundMusic.play();
      }
      
      // Hide all gift screens
      document.querySelectorAll('.gift-screen').forEach(screen => {
        screen.classList.remove('active');
        screen.style.display = 'none';
      });
      
      // Show gifts selection screen
      const giftsScreen = document.getElementById('giftsScreen');
      giftsScreen.style.display = 'block';
      giftsScreen.classList.add('active');
      
      // Scroll to top of container
      document.querySelector('.container').scrollTop = 0;
    }
  </script>
</body>
</html>

